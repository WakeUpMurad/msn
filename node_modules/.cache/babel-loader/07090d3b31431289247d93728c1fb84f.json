{"ast":null,"code":"import { authAPI } from \"../../api/api\";\nimport { stopSubmit } from \"redux-form\";\nconst SET_USER_DATA = 'SET_USER_DATA';\nlet initialState = {\n  userId: null,\n  login: null,\n  email: null\n};\n\nconst authReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_USER_DATA:\n      return { ...state,\n        ...action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const setAuthsUserData = (userId, login, email) => ({\n  type: SET_USER_DATA,\n  payload: {\n    userId,\n    login,\n    email\n  }\n});\nexport const getAuthUser = () => async dispatch => {\n  const data = await authAPI.getAuthUser();\n\n  if (data.resultCode === 0) {\n    let {\n      id,\n      login,\n      email\n    } = data.data;\n    dispatch(setAuthsUserData(id, login, email));\n    localStorage.setItem('auth', 'true');\n  }\n};\nexport const logIn = (email, password, rememberMe) => async dispatch => {\n  const responseData = await authAPI.login(email, password, rememberMe);\n\n  if (responseData.resultCode === 0) {\n    return dispatch(getAuthUser());\n  } else {\n    let message = responseData.messages.length > 0 ? responseData.messages[0] : 'Some error';\n    dispatch(stopSubmit('login', {\n      _error: message\n    }));\n  }\n};\nexport const logOut = () => async dispatch => {\n  const responseData = await authAPI.logout();\n\n  if (responseData.resultCode === 0) {\n    dispatch(setAuthsUserData(null, null, null));\n    localStorage.removeItem('auth');\n  }\n};\nexport default authReducer;","map":{"version":3,"names":["authAPI","stopSubmit","SET_USER_DATA","initialState","userId","login","email","authReducer","state","action","type","payload","setAuthsUserData","getAuthUser","dispatch","data","resultCode","id","localStorage","setItem","logIn","password","rememberMe","responseData","message","messages","length","_error","logOut","logout","removeItem"],"sources":["/Users/muradgakhramanov/Desktop/MyProject/social_net/src/redux/reducers/auth-reducer.js"],"sourcesContent":["import {authAPI} from \"../../api/api\";\nimport {stopSubmit} from \"redux-form\";\nconst SET_USER_DATA = 'SET_USER_DATA';\n\nlet initialState = {\n    userId: null,\n    login: null,\n    email: null,\n};\n\nconst authReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n        case SET_USER_DATA:\n            return  {\n                ...state,\n                ...action.payload,\n            }\n        default:\n            return state;\n    }\n}\nexport const setAuthsUserData = (userId, login, email) => ({ type: SET_USER_DATA, payload: {userId, login, email} })\n\nexport const getAuthUser = () => async (dispatch) => {\n  const data = await authAPI.getAuthUser();\n\n  if(data.resultCode === 0) {\n      let { id, login, email } = data.data;\n      dispatch(setAuthsUserData(id, login, email));\n      localStorage.setItem('auth', 'true')\n  }\n}\n\nexport const logIn = (email, password, rememberMe) => async (dispatch) => {\n  const responseData = await authAPI.login(email, password, rememberMe);\n\n  if (responseData.resultCode === 0) {\n    return dispatch(getAuthUser());\n  } else {\n    let message = responseData.messages.length > 0 ? responseData.messages[0] : 'Some error';\n    dispatch(stopSubmit('login', {_error: message}))\n  }\n}\nexport const logOut = () => async (dispatch) => {\n  const responseData = await authAPI.logout();\n\n  if(responseData.resultCode === 0) {\n    dispatch(setAuthsUserData(null, null, null));\n    localStorage.removeItem('auth')\n  }\n}\n\n\nexport default authReducer;\n"],"mappings":"AAAA,SAAQA,OAAR,QAAsB,eAAtB;AACA,SAAQC,UAAR,QAAyB,YAAzB;AACA,MAAMC,aAAa,GAAG,eAAtB;AAEA,IAAIC,YAAY,GAAG;EACfC,MAAM,EAAE,IADO;EAEfC,KAAK,EAAE,IAFQ;EAGfC,KAAK,EAAE;AAHQ,CAAnB;;AAMA,MAAMC,WAAW,GAAG,YAAkC;EAAA,IAAjCC,KAAiC,uEAAzBL,YAAyB;EAAA,IAAXM,MAAW;;EAElD,QAAQA,MAAM,CAACC,IAAf;IACI,KAAKR,aAAL;MACI,OAAQ,EACJ,GAAGM,KADC;QAEJ,GAAGC,MAAM,CAACE;MAFN,CAAR;;IAIJ;MACI,OAAOH,KAAP;EAPR;AASH,CAXD;;AAYA,OAAO,MAAMI,gBAAgB,GAAG,CAACR,MAAD,EAASC,KAAT,EAAgBC,KAAhB,MAA2B;EAAEI,IAAI,EAAER,aAAR;EAAuBS,OAAO,EAAE;IAACP,MAAD;IAASC,KAAT;IAAgBC;EAAhB;AAAhC,CAA3B,CAAzB;AAEP,OAAO,MAAMO,WAAW,GAAG,MAAM,MAAOC,QAAP,IAAoB;EACnD,MAAMC,IAAI,GAAG,MAAMf,OAAO,CAACa,WAAR,EAAnB;;EAEA,IAAGE,IAAI,CAACC,UAAL,KAAoB,CAAvB,EAA0B;IACtB,IAAI;MAAEC,EAAF;MAAMZ,KAAN;MAAaC;IAAb,IAAuBS,IAAI,CAACA,IAAhC;IACAD,QAAQ,CAACF,gBAAgB,CAACK,EAAD,EAAKZ,KAAL,EAAYC,KAAZ,CAAjB,CAAR;IACAY,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,MAA7B;EACH;AACF,CARM;AAUP,OAAO,MAAMC,KAAK,GAAG,CAACd,KAAD,EAAQe,QAAR,EAAkBC,UAAlB,KAAiC,MAAOR,QAAP,IAAoB;EACxE,MAAMS,YAAY,GAAG,MAAMvB,OAAO,CAACK,KAAR,CAAcC,KAAd,EAAqBe,QAArB,EAA+BC,UAA/B,CAA3B;;EAEA,IAAIC,YAAY,CAACP,UAAb,KAA4B,CAAhC,EAAmC;IACjC,OAAOF,QAAQ,CAACD,WAAW,EAAZ,CAAf;EACD,CAFD,MAEO;IACL,IAAIW,OAAO,GAAGD,YAAY,CAACE,QAAb,CAAsBC,MAAtB,GAA+B,CAA/B,GAAmCH,YAAY,CAACE,QAAb,CAAsB,CAAtB,CAAnC,GAA8D,YAA5E;IACAX,QAAQ,CAACb,UAAU,CAAC,OAAD,EAAU;MAAC0B,MAAM,EAAEH;IAAT,CAAV,CAAX,CAAR;EACD;AACF,CATM;AAUP,OAAO,MAAMI,MAAM,GAAG,MAAM,MAAOd,QAAP,IAAoB;EAC9C,MAAMS,YAAY,GAAG,MAAMvB,OAAO,CAAC6B,MAAR,EAA3B;;EAEA,IAAGN,YAAY,CAACP,UAAb,KAA4B,CAA/B,EAAkC;IAChCF,QAAQ,CAACF,gBAAgB,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAjB,CAAR;IACAM,YAAY,CAACY,UAAb,CAAwB,MAAxB;EACD;AACF,CAPM;AAUP,eAAevB,WAAf"},"metadata":{},"sourceType":"module"}