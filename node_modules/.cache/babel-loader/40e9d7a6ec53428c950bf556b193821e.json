{"ast":null,"code":"import { usersAPI } from \"../../api/api\";\nimport { updateObjectArray } from \"../../utils/objects-helpers\";\nconst SET_USERS = 'SET_USERS';\nconst FOLLOW = 'FOLLOW';\nconst UNFOLLOW = 'UNFOLLOW';\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT';\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\nlet initialState = {\n  users: [],\n  pageSize: 10,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: true,\n  followingInProgress: []\n};\n\nconst usersReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_USERS:\n      return { ...state,\n        users: [...action.users]\n      };\n\n    case FOLLOW:\n      return { ...state,\n        users: updateObjectArray(state.users, action.userId, 'id', {\n          followed: true\n        })\n      };\n\n    case UNFOLLOW:\n      return { ...state,\n        users: updateObjectArray(state.users, action.userId, 'id', {\n          followed: false\n        })\n      };\n\n    case SET_CURRENT_PAGE:\n      return { ...state,\n        currentPage: action.currentPage\n      };\n\n    case SET_TOTAL_USERS_COUNT:\n      return { ...state,\n        totalUsersCount: action.totalUsersCount\n      };\n\n    case TOGGLE_IS_FETCHING:\n      return { ...state,\n        isFetching: action.isFetching\n      };\n\n    case TOGGLE_IS_FOLLOWING_PROGRESS:\n      return { ...state,\n        followingInProgress: action.isFetching ? [...state.followingInProgress, action.userId] : state.followingInProgress.filter(id => id !== action.userId)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const setUsers = users => ({\n  type: SET_USERS,\n  users\n});\nexport const followSuccess = userId => ({\n  type: FOLLOW,\n  userId\n});\nexport const unfollowSuccess = userId => ({\n  type: UNFOLLOW,\n  userId\n});\nexport const setCurrentPage = currentPage => ({\n  type: SET_CURRENT_PAGE,\n  currentPage\n});\nexport const setUsersCount = totalUsersCount => ({\n  type: SET_TOTAL_USERS_COUNT,\n  totalUsersCount\n});\nexport const toggleIsFetching = isFetching => ({\n  type: TOGGLE_IS_FETCHING,\n  isFetching\n});\nexport const toggleFollowingProgress = (isFetching, userId) => ({\n  type: TOGGLE_IS_FOLLOWING_PROGRESS,\n  isFetching,\n  userId\n});\nexport const requestUsers = (page, pageSize) => async dispatch => {\n  dispatch(toggleIsFetching(true));\n  dispatch(setCurrentPage(page));\n  const responseData = await usersAPI.getUsers(page, pageSize);\n  dispatch(toggleIsFetching(false));\n  dispatch(setUsers(responseData.items));\n  dispatch(setUsersCount(responseData.totalCount));\n};\n\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\n  dispatch(toggleFollowingProgress(true, userId));\n  const responseData = await apiMethod(userId);\n\n  if (responseData.resultCode === 0) {\n    dispatch(actionCreator(userId));\n  }\n\n  dispatch(toggleFollowingProgress(false, userId));\n};\n\nexport const follow = userId => async dispatch => {\n  await followUnfollowFlow(dispatch, userId, usersAPI.follow, followSuccess);\n};\nexport const unfollow = userId => async dispatch => {\n  await followUnfollowFlow(dispatch, userId, usersAPI.unfollow, unfollowSuccess);\n};\nexport default usersReducer;","map":{"version":3,"names":["usersAPI","updateObjectArray","SET_USERS","FOLLOW","UNFOLLOW","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","initialState","users","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","usersReducer","state","action","type","userId","followed","filter","id","setUsers","followSuccess","unfollowSuccess","setCurrentPage","setUsersCount","toggleIsFetching","toggleFollowingProgress","requestUsers","page","dispatch","responseData","getUsers","items","totalCount","followUnfollowFlow","apiMethod","actionCreator","resultCode","follow","unfollow"],"sources":["/Users/muradgakhramanov/Desktop/MyProject/social_net/src/redux/reducers/users-reducer.js"],"sourcesContent":["import {usersAPI} from \"../../api/api\";\nimport {updateObjectArray} from \"../../utils/objects-helpers\";\n\nconst SET_USERS = 'SET_USERS';\nconst FOLLOW = 'FOLLOW';\nconst UNFOLLOW = 'UNFOLLOW';\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT';\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\n\nlet initialState = {\n    users: [],\n    pageSize: 10,\n    totalUsersCount: 0,\n    currentPage: 1,\n    isFetching: true,\n    followingInProgress: [],\n};\n\nconst usersReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n        case SET_USERS:\n            return  {...state, users: [...action.users]}\n\n        case FOLLOW:\n            return {\n                ...state,\n                users: updateObjectArray(state.users, action.userId, 'id', {followed: true})\n            }\n\n        case UNFOLLOW:\n            return {\n                ...state,\n                users: updateObjectArray(state.users, action.userId, 'id', {followed: false})\n            }\n\n        case SET_CURRENT_PAGE:\n            return {...state, currentPage: action.currentPage}\n\n        case SET_TOTAL_USERS_COUNT:\n            return {...state, totalUsersCount: action.totalUsersCount}\n\n        case TOGGLE_IS_FETCHING:\n            return {...state, isFetching: action.isFetching}\n\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\n            return {\n                ...state,\n                followingInProgress: action.isFetching\n                    ? [...state.followingInProgress, action.userId]\n                    : state.followingInProgress.filter(id => id !== action.userId)\n            }\n\n        default:\n            return state;\n    }\n}\n\nexport const setUsers = (users) => ({ type: SET_USERS, users })\nexport const followSuccess = (userId) => ({ type: FOLLOW, userId })\nexport const unfollowSuccess = (userId) => ({ type: UNFOLLOW, userId })\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, currentPage })\nexport const setUsersCount = (totalUsersCount) => ({ type: SET_TOTAL_USERS_COUNT, totalUsersCount })\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, isFetching })\nexport const toggleFollowingProgress = (isFetching, userId) => ({ type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId })\n\nexport const requestUsers = (page, pageSize) => async (dispatch) => {\n\n  dispatch(toggleIsFetching(true));\n  dispatch(setCurrentPage(page));\n  const responseData = await usersAPI.getUsers(page, pageSize);\n  dispatch(toggleIsFetching(false));\n  dispatch(setUsers(responseData.items));\n  dispatch(setUsersCount(responseData.totalCount));\n}\n\nconst followUnfollowFlow = async  (dispatch, userId, apiMethod, actionCreator) => {\n  dispatch(toggleFollowingProgress(true, userId));\n  const responseData = await apiMethod(userId);\n\n  if(responseData.resultCode === 0) {\n    dispatch(actionCreator(userId));\n  }\n  dispatch(toggleFollowingProgress(false, userId));\n}\nexport const follow = (userId) => async (dispatch) => {\n  await followUnfollowFlow(dispatch, userId, usersAPI.follow, followSuccess);\n}\nexport const unfollow = (userId) => async (dispatch) => {\n  await followUnfollowFlow(dispatch, userId, usersAPI.unfollow, unfollowSuccess);\n}\n\nexport default usersReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}